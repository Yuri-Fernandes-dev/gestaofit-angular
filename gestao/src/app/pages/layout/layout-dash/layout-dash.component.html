<app-barra-principal></app-barra-principal>

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="page-title"><i class="bi bi-speedometer2 me-2"></i>Dashboard</h2>
    <div class="period-selector">
      <div class="d-flex align-items-center">
        <select class="form-select me-2" [(ngModel)]="selectedPeriod" (change)="applyPeriodFilter()">
          <option value="today">Hoje</option>
          <option value="week">Esta Semana</option>
          <option value="month">Este Mês</option>
          <option value="quarter">Este Trimestre</option>
          <option value="year">Este Ano</option>
        </select>
        <button class="btn btn-primary btn-sm" (click)="filterData()">
          <i class="bi bi-filter me-1"></i> Filtrar
        </button>
      </div>
    </div>
  </div>

  <!-- Cards KPI -->
  <div class="row mb-4">
    <div class="col-md-3">
      <div class="dashboard-card card-success">
        <div class="card-icon">
          <i class="bi bi-cart-check"></i>
        </div>
        <div class="card-content">
          <h5 class="card-title">Total de Vendas</h5>
          <p class="card-value">R$ 1.240,00</p>
          <div class="card-trend positive">
            <i class="bi bi-graph-up-arrow"></i> 12% vs mês anterior
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="dashboard-card card-warning">
        <div class="card-icon">
          <i class="bi bi-cash-coin"></i>
        </div>
        <div class="card-content">
          <h5 class="card-title">Despesas</h5>
          <p class="card-value">R$ 3.500,46</p>
          <div class="card-trend negative">
            <i class="bi bi-graph-down-arrow"></i> 5% vs mês anterior
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="dashboard-card card-danger">
        <div class="card-icon">
          <i class="bi bi-tags"></i>
        </div>
        <div class="card-content">
          <h5 class="card-title">Custo Unitário</h5>
          <p class="card-value">R$ 1.240,00</p>
          <div class="card-trend neutral">
            <i class="bi bi-dash"></i> Sem alteração
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-3">
      <div class="dashboard-card card-primary">
        <div class="card-icon">
          <i class="bi bi-piggy-bank"></i>
        </div>
        <div class="card-content">
          <h5 class="card-title">Lucro</h5>
          <p class="card-value">R$ 3.500,46</p>
          <div class="card-trend positive">
            <i class="bi bi-graph-up-arrow"></i> 8% vs mês anterior
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Gráficos -->
  <div class="row" *ngIf="isBrowser">
    <div class="col-md-6 mb-4">
      <div class="chart-container">
        <div class="chart-header">
          <h3><i class="bi bi-pie-chart me-2"></i>Distribuição de Vendas por Categoria</h3>
          <div class="chart-actions">
            <button class="btn btn-sm btn-outline-secondary">
              <i class="bi bi-download"></i>
            </button>
          </div>
        </div>
        <div class="chart-body">
          <canvas baseChart
                  [data]="pieChartData"
                  [type]="'pie'"
                  [options]="pieChartOptions"
                  height="300">
          </canvas>
        </div>
      </div>
    </div>

    <div class="col-md-6 mb-4">
      <div class="chart-container">
        <div class="chart-header">
          <h3><i class="bi bi-bar-chart me-2"></i>Vendas Mensais</h3>
          <div class="chart-actions">
            <button class="btn btn-sm btn-outline-secondary">
              <i class="bi bi-download"></i>
            </button>
          </div>
        </div>
        <div class="chart-body">
          <canvas baseChart
                  [data]="barChartData"
                  [type]="'bar'"
                  [options]="barChartOptions"
                  height="300">
          </canvas>
        </div>
      </div>
    </div>
  </div>
</div>